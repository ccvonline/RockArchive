!function(){function t(){CCV.mapStyles=[{stylers:[{visibility:"simplified"},{saturation:-100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"on"},{gamma:3.05}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"administrative.country",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"off"}]},{}],CCV.mapType=new google.maps.StyledMapType(CCV.mapStyles),CCV.markerFile=window.devicePixelRatio>1.5?"http://www.ccvonline.com/Arena/Content/v6/img/maps/marker@2x.png":"http://www.ccvonline.com/Arena/Content/v6/img/maps/marker.png",CCV.marker=new google.maps.MarkerImage(CCV.markerFile,null,null,null,new google.maps.Size(30,38)),CCV.baseMap=function(t,i){this.holder=t,this.points=i,this.markers=[],this.bounds=new google.maps.LatLngBounds,this.zoom=this.zoom||12,this.useZoom=this.useZoom||!1,this.mapOptions=this.mapOptions||{mapTypeId:"CCV",disableDefaultUI:!0}},CCV.baseMap.prototype={draw:function(){if(!this.holder)throw"Can't find map holder";this.map=new google.maps.Map(this.holder,this.mapOptions),this.map.mapTypes.set("CCV",CCV.mapType),this.dropMarkers(),this.fitMarkers(),this.bindUi()},dropMarkers:function(){for(var t=0;t<this.points.length;t++){var i=this.points[t];this.dropMarker(i)}},dropMarker:function(t){var i=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lng),icon:CCV.marker,map:this.map,title:t.title,animation:google.maps.Animation.DROP});this.markers.push(i),this.bounds.extend(i.position),this.afterDropMarker.call(this,t,i)},afterDropMarker:function(){},fitMarkers:function(){this.map.setCenter(this.bounds.getCenter()),this.useZoom?this.map.setZoom(this.zoom):this.map.fitBounds(this.bounds)},bindUi:function(){var t=this;$(window).resize(function(){t.fitMarkers()})},getInstanceName:function(){for(var t in window)if(window[t]==this)return t}},CCV.campusMap=function(t,i){CCV.baseMap.call(this,t,i),this.campusToDraw=i||"all"},CCV.campusMap.prototype=new CCV.baseMap,CCV.campusMap.prototype.constructor=CCV.campusMap,CCV.campusMap.prototype.dropMarkers=function(){if("all"==this.campusToDraw)for(var t=0;t<CCV.locations.length;t++){var i=CCV.locations[t];this.dropMarker(i)}else{var i=CCV.findCampusById(this.campusToDraw);this.dropMarker(i),this.useZoom=!0}},CCV.campusMap.prototype.dropMarker=function(t){var i=new google.maps.Marker({position:new google.maps.LatLng(t.geo.lat,t.geo.lng),icon:CCV.marker,map:this.map,title:t.name,campusid:t.id,animation:google.maps.Animation.DROP});this.markers.push(i),this.bounds.extend(i.position),this.afterDropMarker.call(this,t,i)},CCV.campusInfoWindowMap=function(t,i){CCV.campusMap.call(this,t,i),this.infowindow=new google.maps.InfoWindow({content:"Loading..."})},CCV.campusInfoWindowMap.prototype=new CCV.campusMap,CCV.campusInfoWindowMap.prototype.constructor=CCV.campusInfoWindowMap,CCV.campusInfoWindowMap.prototype.afterDropMarker=function(t,i){var o=this;google.maps.event.addListener(i,"click",function(){o.infowindow.setContent(o.buildInfoWindow(t)),o.infowindow.open(o.map,this)})},CCV.campusInfoWindowMap.prototype.buildInfoWindow=function(t){var i;return i='<div class="infowindow">',i+='  <div class="name">'+t.name+" Campus</div>",i+='  <div class="group">',i+='    <img class="photo" src="'+t.photo+'&width=75" style="width: 75px; height: 75px;">',i+='    <div class="details">',i+='      <span class="address">'+t.street+"<br>"+t.city+", "+t.state+" "+t.zip+"</span>",i+='      <span class="phone">'+t.phone+"</span>",i+="    </div>",i+="  </div>","function"==typeof this.selectCampus&&(i+='  <a class="select" onclick="'+this.getInstanceName()+".selectCampus("+t.id+')">Select this Campus</a>'),i+="</div>"}}window.CCV=window.CCV||{},"object"==typeof google&&"object"==typeof google.maps?t():$(window).on("googleMapsIsLoaded",function(){t()})}();
Rock.controls.util.loadGoogleMapsApi("https://maps.googleapis.com/maps/api/js?sensor=false&libraries=drawing"),$(window).on("googleMapsIsLoaded",function(){window.campusModalMap=new CCV.campusInfoWindowMap(document.getElementById("campusmodal-holder")),campusModalMap.selectCampus=function(a){CCV.selectCampus(a)},campusModalMap.draw(),$("document").ready(function(){$("body").addClass("modal-open")})});