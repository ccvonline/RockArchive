var landingMap=new CCV.infoWindowMap(document.getElementById("map-holder"));landingMap.bindUi=function(){var n=this;$(window).resize(function(){n.fitMarkers()}),$(".js-find-nearest-campus").click(function(){n.findNearestCampus(n.openInfoWindow,this)})},landingMap.openInfoWindow=function(n){var o=this.markers.filter(function(o){return o.campusid==n.id})[0];this.infowindow.setContent(this.buildInfoWindow(n)),this.infowindow.open(this.map,o)},landingMap.findNearestCampus=function(n,o){function a(o,a){if(a==google.maps.DistanceMatrixStatus.OK){for(var i,s,r=Number.POSITIVE_INFINITY,l=o.rows[0].elements,d=0;d<l.length;d++)s=l[d].duration.value,r>s&&(r=s,i=d);e.removeClass("is-loading"),t.nearestCampus=CCV.locations[i],"function"==typeof n&&n.call(t,t.nearestCampus)}}var i,t=this,e=$(o),s=new google.maps.DistanceMatrixService;navigator.geolocation&&(e.addClass("is-loading"),navigator.geolocation.getCurrentPosition(function(n){i=new google.maps.LatLng(n.coords.latitude,n.coords.longitude),s.getDistanceMatrix({origins:[i],destinations:t.allLocationsGeoArray(),travelMode:google.maps.TravelMode.DRIVING},a)}))},landingMap.allLocationsGeoArray=function(){for(var n=[],o=0;o<CCV.locations.length;o++){var a=CCV.locations[o].geo,i=new google.maps.LatLng(a.lat,a.lng);n.push(i)}return n},landingMap.draw();