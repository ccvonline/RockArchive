

//
// MASTHEAD
// --------------------------------------------------


// Mobile Pages Masthead (mobile give, etc)
// -------------------------

.mobhead {
  margin-bottom: @line-height-computed;
  margin-left: -2px;
  margin-right: -2px;
  .text-aa();
}
  .mobhead-inner {
    background: @brand-primary;
    color: #fff;
    overflow: hidden;
  }
    .mobhead .logo {
      display: block;
      float: left;
      background: url(../assets/logo-icon.svg) no-repeat left center;
      height: 22px;
      width: 120px;
      margin-top: 14px;
      margin-left: 12px;
    }
    .mobhead-title {
      margin-top: 0;
      margin-bottom: 0;
      float: right;
      font-size: 20px;
      line-height: 50px;
      margin-right: @grid-gutter-width/2;
    }


// Main Masthead
// -------------------------

.masthead {
  margin-bottom: @grid-gutter-width;
  .din();
  .text-aa();
}

  .masthead-upper {
    .clearfix();
    background-color: #1d1d1d;
    @media @sm {
      padding: @grid-gutter-width 0;
    }

    a { color: inherit; }
  }

    .masthead .navbar-toggle {
      margin: 0;
      color: @gray-lighter;
      background: #333;
      border-radius: 0;
      padding: 16px 15px 17px;
      &.collapsed {
        background: none;
      }
    }

    .masthead-brand {
      overflow: hidden;
      @media @sm {
        float: left;
      }
    }

      // note: these seemingly random widths are to make the light weight of
      //       the logo text (of the valley) look good on regular DPI monitors
      .masthead-brand .logo {
        display: block;
        float: left;
        background-image: url(../assets/logo.svg);
        background-repeat: no-repeat;
        background-position: left center;
        margin-left: @grid-gutter-width/2;
        height: 60px;
        width: 203px; // see above note
        @media @sm {
          margin-left: @grid-gutter-width;
          height: 50px;
          width: 244px; // see above note
        }
      }

    .masthead-nav {
    }

      .navbar-collapse {
        box-shadow: none;
      }

        .masthead-navitems {
          margin: 0;
          list-style-type: none;
          text-transform: uppercase;
          letter-spacing: .5px;
          line-height: 40px;
          padding-top: 5px;
          padding-bottom: 5px;
          text-align: center;
          padding: @grid-gutter-width/2 0;
          margin-left: -@grid-gutter-width/4;
          @media @sm {
            line-height: 50px;
            text-align: right;
            padding: 0 @grid-gutter-width;
          }
          @media @md {
            margin-left: -@grid-gutter-width/2;
          }
        }

          .masthead-navitem {
            display: inline-block;
            padding: 0 @grid-gutter-width/4;
            .transition(opacity .5s);
            color: #ccc;
            @media @md {
              padding: 0 @grid-gutter-width/2;
            }

            &:first-child {
              color: #fff;
              font-weight: 700;
            }

            &:hover {
              .opacity(.75);
            }

            &.active {
              border-bottom: 2px solid @gray;
            }

            a {
              text-decoration: none;
            }
          }

          .menu-btn {
            cursor: pointer;
            display: none;
            color: #fff;
            font-weight: 700;
            @media @sm { display: inline-block; }
            .menu-icon {
              display: inline-block;
              transition: .3s;
            }
            .lines {
              display: inline-block;
              width: 18px;
              height: 2px;
              background: #fff;
              border-radius: 2px;
              transition: 0.3s;
              position: relative;
              top: -5px;
              &:before, &:after {
                display: inline-block;
                width: 18px;
                height: 2px;
                border-radius: 2px;
                transition: 0.3s;
                position: absolute;
                left: 0;
                content: '';
              }
              &:before { top: -6px; }
              &:after { top: 6px; }
            }
            &:hover {
              .opacity(1); // undoes regular menu mouseover
            }

            // slightly expand on hover
            &.collapsed:hover a {
              .opacity(1);

              .lines:before { .translate(0, -2px); }
              .lines:after { .translate(0, 2px); }
            }

            // activated state
            & {
              .lines { background: transparent; }
              .lines:before, .lines:after {
                transform-origin: 50% 50%;
                top: 0;
                background: lighten(@brand-primary, 20%);
              }
              .lines:before {
                transform: rotate3d(0, 0, 1, -45deg);
                -ms-transform: rotate(-45deg);
              }
              .lines:after {
                transform: rotate3d(0, 0, 1, 45deg);
                -ms-transform: rotate(45deg);
              }
            }

            // inactive state
            &.collapsed {
              .lines { background: #fff; }
              .lines:before, .lines:after {
                transform-origin: 0.28571rem center;
                background: #fff;
              }
              .lines:before {
                transform: none;
                -ms-transform: none;
                top: -6px;
              }
              .lines:after {
                transform: none;
                -ms-transform: none;
                top: 6px;
              }
            }
          }

        .masthead-fullmenu {
          background: rgba(255,255,255,.98);
          margin-bottom: @grid-gutter-width/2;
          @media @sm {
            padding-top: 5%;
            position: absolute;
            top: 50px + (@grid-gutter-width*2);
            bottom: 0; // in case user has scrolled a bit before opening menu
            left: 0;
            right: 0;
            z-index: 500;
          }
        }
          .masthead-fullmenu .container {
            @media @sm {
              height: 100vh; // setting the height explicity removes the BS animation jitter
            }
          }
            .masthead-fullmenusection {
            }

  .masthead-lower {
    .clearfix();
    background-color: #e9e9e9;
  }

    // this crazy nesting is to undo some default Rock styles, in the future we
    // could look into changing the block markup
    .masthead-lower .loginstatus,
    .masthead-lower .contextsetter {

      margin: 0;

      // for mobile
      .dropdown {
        text-align: left;
      }

      .dropdown-menu {
        font-size: 18px;
      }

      li { min-width: 0; }

      li > a {
        font-size: .9em;
        line-height: 40px;
      }

    }
    .masthead-lower .contextsetter a {
      text-transform: uppercase;
      color: @gray-light;
      font-weight: 600;
      padding: 0 @grid-gutter-width/2;

      @media @sm {
        padding-left: @grid-gutter-width;
      }
    }
    .masthead-lower .loginstatus a {
      color: @gray;
      font-style: italic;
      padding: 0 @grid-gutter-width/4;
    }

  @media (max-width: @screen-sm-max) {
    .masthead-lower .navbar-nav {
      float: left;
    }
  }
