{{ "../Styles/pages/next-steps.css" | AddLinkTagToHead:'rel','stylesheet' }}

<script src="~~/Scripts/Vendor/greensock/TweenMax.min.js"></script>
<script src="~~/Scripts/Vendor/scrollmagic/uncompressed/ScrollMagic.js"></script>
<script src="~~/Scripts/Vendor/scrollmagic/uncompressed/plugins/animation.gsap.js"></script>
<!-- <script src="~~/Scripts/Vendor/scrollmagic/uncompressed/plugins/debug.addIndicators.js"></script> -->

<script>
	// init controller
	var controller = new ScrollMagic.Controller();
</script>

<style media="screen">
	.mainfooter {
		min-height: 500px;
	}
</style>

<div class="row">
	<div class="col-xs-3 nextsteps-icon-holder">
		<div id="pin1" class="nextsteps-icon">
			<img src="https://s3.amazonaws.com/media.ccvonline.com/external_site_v7/nextsteps/blank.png" alt="" class="active"/>
			<img id="hide1" src="https://s3.amazonaws.com/media.ccvonline.com/external_site_v7/nextsteps/sp.png" alt="" class="active"/>
			<img id="hide2" src="https://s3.amazonaws.com/media.ccvonline.com/external_site_v7/nextsteps/attend.png" alt="" />
			<img id="hide3" src="https://s3.amazonaws.com/media.ccvonline.com/external_site_v7/nextsteps/serve.png" alt="" />
			<img id="hide4" src="https://s3.amazonaws.com/media.ccvonline.com/external_site_v7/nextsteps/nh.png" alt="" />
		</div>
	</div>
	<div class="col-xs-9 js-pin-height">
		<div id="trigger1"></div>
		<div class="bigblock">
			<h2>Starting Point</h2>
			<p>
				Sign up for the next Starting Point class to find out what CCV is all about, take a deep look at the Christian faith and learn how you can get involved. Take the next step and register today.
			</p>
			<p class="text-muted">
				Childcare is available for attending parents.
			</p>
			<p>
				<a href="#" class="btn btn-default">Register Now</a>
			</p>
		</div>
		<div id="trigger2"></div>
		<div class="bigblock">
			<h2>Attend</h2>
			<p>
				CCV is one church in many locations. Find the campus closest to home and join the family by attending regularly. Our exciting weekend programs for all ages are experiences you won't want to miss.
			</p>
			<p>
				<a href="#" class="btn btn-default">Locations & Times</a>
			</p>
		</div>
		<div id="trigger3"></div>
		<div class="bigblock">
			<h2>Serve</h2>
			<p>
				Serving is a great way to get involved in the CCV community. We have opportunities for every age and interest. Behind the scenes or upfront and personal, you can find the perfect fit for yourself and your family. Sign up today and experience first-hand the impact our volunteer teams have on our local, national and international ministry.
			</p>
			<p>
				<a class="btn btn-default">Serve at CCV</a>
				<a class="btn text-muted">Serve Globally</a>
			</p>
		</div>
		<div id="trigger4"></div>
		<div class="bigblock js-pin-height-trim">
			<h2>Neighborhoods</h2>
			<p>
				Life was not meant to be lived alone. Gather weekly with people from your neighborhood to build a community and impact it for the better. At CCV, neighborhood groups are vital to our church. They provide a sense of connection and security as we all tackle life together. Make neighborhood groups a priority by meeting weekly with those physically closest to you. Our neighborhood groups draw out the relevance of Biblical principles discussed in the weekend services.
			</p>
			<p>
				<a class="btn btn-default">Find a Group</a>
			</p>
		</div>
	</div>
</div>

<p>
	&nbsp;
</p>
<p>
	&nbsp;
</p>
<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>
<p>
	&nbsp;
</p>
<p>
	&nbsp;
</p>

<script>
	// $(function () {
	$(document).ready(function(){
		var pinDurationCache = 0
		function pinDuration () {
			return pinDurationCache
		}
		function calcPinDuration () {
			var r = $('.js-pin-height').height()
			r -= $('.js-pin-height-trim').height()
			r -= 40*2
			if (window.innerWidth >= 1200) {
				r -= 40
			}
			pinDurationCache = r
		}
		calcPinDuration()
		$(window).on("resize", calcPinDuration)
		var pinScene = new ScrollMagic.Scene({triggerElement: "#trigger1", duration: pinDuration})
			.setPin("#pin1")
			// .addIndicators({name: "pin"})
			.triggerHook("onLeave")
			.addTo(controller);

		var t1DurationCache
		function t1Duration () {
			return t1DurationCache
		}
		function calcT1Duration () {
			t1DurationCache = $("#trigger1").next(".bigblock").height() + 90
		}
		var t2DurationCache
		function t2Duration () {
			return t2DurationCache
		}
		function calcT2Duration () {
			t2DurationCache = $("#trigger2").next(".bigblock").height() + 90
		}
		var t3DurationCache
		function t3Duration () {
			return t3DurationCache
		}
		function calcT3Duration () {
			t3DurationCache = $("#trigger3").next(".bigblock").height() + 90
		}
		var t4DurationCache
		function t4Duration () {
			return t4DurationCache
		}
		function calcT4Duration () {
			t4DurationCache = $("#trigger4").next(".bigblock").height() + 90
		}

		function calcAllSizes () {
			calcT1Duration()
			calcT2Duration()
			calcT3Duration()
			calcT4Duration()
		}

		calcAllSizes()
		$(window).on("resize", calcAllSizes)

		new ScrollMagic.Scene({triggerElement: "#trigger2", duration: t2Duration, offset: -100})
			// .setTween("#hide1", .5, { opacity: 0 } )
			.setClassToggle("#hide2", "active")
			// .addIndicators()
			.triggerHook("onLeave")
			.on("start", function(e){
				if (e.scrollDirection === "FORWARD") $("#hide1").removeClass("active")
				if (e.scrollDirection === "REVERSE") $("#hide1").addClass("active")
			})
			.addTo(controller);
		new ScrollMagic.Scene({triggerElement: "#trigger3", duration: t3Duration, offset: -100})
			// .setTween("#hide2", .5, { opacity: 0 } )
			.setClassToggle("#hide3", "active")
			// .addIndicators()
			.triggerHook("onLeave")
			.addTo(controller);
		new ScrollMagic.Scene({triggerElement: "#trigger4", offset: -100})
			// .setTween("#hide3", .5, { opacity: 0 } )
			.setClassToggle("#hide4", "active")
			// .addIndicators()
			.triggerHook("onLeave")
			.addTo(controller);
	})
	// });
</script>
